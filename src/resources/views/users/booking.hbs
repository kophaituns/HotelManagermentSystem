 <div class="booking-page container-fluid py-5">
        <h1 class="text-center mb-4">Đặt phòng</h1>
        
        <!-- Thông tin phòng -->
        <div class="room-info bg-light p-4 rounded shadow mb-5 mx-auto" style="max-width: 1200px;">
            <h2>Thông tin phòng</h2>
            <div class="row">
                <div class="col-md-4">
                    {{#if room.images.[0]}}
                        <img src="{{room.images.[0]}}" class="img-fluid rounded" alt="{{room.roomType.name}}">
                    {{else}}
                        <img src="https://via.placeholder.com/300x200" class="img-fluid rounded" alt="Hình ảnh phòng">
                    {{/if}}
                </div>
                <div class="col-md-8">
                    <h3>{{room.roomType.name}} - Phòng {{room.number}}</h3>
                    <p><strong>Giá:</strong> {{room.price}} VND/đêm</p>
                    <p><strong>Sức chứa:</strong> {{room.capacity}} người</p>
                    <p><strong>Diện tích:</strong> {{room.size}} m²</p>
                    <p><strong>Hướng nhìn:</strong> {{room.view}}</p>
                    <p><strong>Tiện nghi:</strong> {{room.amenities.beds}}, {{room.amenities.bathroom}}</p>
                    <p><strong>Ngày nhận phòng:</strong> {{checkin}}</p>
                    <p><strong>Ngày trả phòng:</strong> {{checkout}}</p>
                    <p><strong>Số phòng:</strong> {{roomCount}}</p>
                    <p><strong>Người lớn:</strong> {{adults}}</p>
                    <p><strong>Trẻ em:</strong> {{children}}</p>
                    <p><strong>Tổng giá:</strong> {{#if totalPrice}}{{totalPrice}} VND{{else}}Đang tính toán{{/if}}</p>
                </div>
            </div>
        </div>

        <!-- Form thông tin khách hàng -->
        <form class="customer-form bg-light p-4 rounded shadow mx-auto" id="bookingForm" style="max-width: 1200px;" action="/book/{{room._id}}/confirm" method="POST">
            <h2>Thông tin khách hàng</h2>
            {{#if error}}
                <p class="text-danger text-center">{{error}}</p>
            {{/if}}
            <div class="row g-3">
                <div class="col-md-6 form-group">
                    <label for="fullName">Họ và tên</label>
                    <input type="text" class="form-control" id="fullName" name="fullName" value="{{formData.fullName}}" required>
                </div>
                <div class="col-md-6 form-group">
                    <label for="email">Email</label>
                    <input type="email" class="form-control" id="email" name="email" value="{{formData.email}}" required>
                </div>
                <div class="col-md-6 form-group">
                    <label for="phone">Số điện thoại</label>
                    <input type="tel" class="form-control" id="phone" name="phone" value="{{formData.phone}}" required>
                </div>
                <div class="col-md-6 form-group">
                    <label for="idNumber">CMND/CCCD</label>
                    <input type="text" class="form-control" id="idNumber" name="idNumber" value="{{formData.idNumber}}">
                </div>
                <div class="col-md-12 form-group">
                    <label for="address">Địa chỉ</label>
                    <textarea class="form-control" id="address" name="address" rows="4">{{formData.address}}</textarea>
                </div>
                <!-- Thông tin từ form tìm kiếm -->
                <input type="hidden" name="checkin" value="{{checkin}}">
                <input type="hidden" name="checkout" value="{{checkout}}">
                <input type="hidden" name="roomCount" value="{{roomCount}}">
                <input type="hidden" name="adults" value="{{adults}}">
                <input type="hidden" name="children" value="{{children}}">
                <input type="hidden" name="totalPrice" value="{{totalPrice}}">
            </div>
            <button type="button" class="btn btn-primary w-100 mt-4 btn-confirm" onclick="showPaymentModal()">Xác nhận đặt phòng</button>
        </form>

        <!-- Modal giả lập thanh toán -->
        <div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="paymentModalLabel">Xác nhận thanh toán</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Vui lòng xác nhận thanh toán cho đơn đặt phòng.</p>
                        <p><strong>Tổng giá:</strong> {{#if totalPrice}}{{totalPrice}} VND{{else}}Đang tính toán{{/if}}</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                        <button type="button" class="btn btn-primary" onclick="document.getElementById('bookingForm').submit()">Thanh toán</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showPaymentModal() {
            const modal = new bootstrap.Modal(document.getElementById('paymentModal'));
            modal.show();
        }

        // Kiểm tra email để tự động điền thông tin khách hàng
        document.getElementById('email').addEventListener('blur', async function() {
            const email = this.value;
            if (email) {
                try {
                    const response = await fetch(`/customer/check?email=${encodeURIComponent(email)}`);
                    const customer = await response.json();
                    if (customer) {
                        document.getElementById('fullName').value = customer.fullName || '';
                        document.getElementById('phone').value = customer.phone || '';
                        document.getElementById('address').value = customer.address || '';
                        document.getElementById('idNumber').value = customer.idNumber || '';
                    }
                } catch (error) {
                    console.error('Lỗi khi kiểm tra email:', error);
                }
            }
        });
    </script>